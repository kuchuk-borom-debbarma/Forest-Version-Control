Tree storage is a central storage mechanism that allows multiple repositories to share the same object storage. This is
particularly useful in a tree structure where parent and child repositories need to manage snapshots collectively.

For a repository to be part of a tree it needs to reference a central storage location. Once linked, the repository will
no longer store its objects locally but will instead use the shared storage.

So if we have a repository called

HospitalService and PatientService and doctorService

If we want to define relationship between them then we need to first create
a Tree storage and give it a name such as "HospitalManagementStorage"
Then we need to link each repository to this storage. using a command such as

fvc link-storage --storage "path_to_HospitalManagementStorage"

when we link we are NOT defining the hierarchy yet. It has to be done manually

This will create a link between the repository and the central storage.
This will take time depending on the objects in the repository as it will need to transfer to the tree storage.

here is what happens when we link a repository to a tree storage:

1. Create a link file in the repository that points to the tree storage location.
2. create objects folder in the tree storage if it does not exist.
3. transfer all existing objects from the repository to the tree storage.
4. Create a reference file where we store the repository metadata, head, and other information.
5. Delete the local objects folder in the repository to avoid confusion and only keep link file.

Now similarly we add patientService and doctorService to the same tree storage.

Now to define the hierarchy we can use a command such as

fvc add-child --parent "path_to_HospitalService" --child "path_to_PatientService,path_to_doctorService"

this can be executed in tree OR any of the linked repo. Since all link to the same tree storage its fine and can refer
to the tree storage.

when we do this we are defining the relationship between the repositories.
this will

1. create/update a tree_index.json file in the tree storage that defines the hierarchy.




so lets define more nicely

for linking a repository to a tree storage

- Command

```bash
fvc link-storage --storage "path_to_tree_store" --path "path_relative_to_tree_store_where_we_want_the_repo_to_exist_when_we_reconstruct_from_tree"
```

- Create link file in the repository ```link.file```

```
path_to_tree_store;path_relative_to_tree_store_where_we_want_the_repo_to_exist_when_we_reconstruct_from_tree
```

- transfer objects to tree storage objects folder
- Next we need to create reference in tree store to refer to this repository
  - Create metadata file in tree store such as `repositories/<repo_name>/metadata.bin`
  - Create HEAD file in tree store such as `repositories/<repo_name>/HEAD`